<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} - {{ .Site.Title }}{{ end }}</title>

<!-- Meta Description -->
{{ if .Description }}
<meta name="description" content="{{ .Description }}">
{{ else if .Site.Params.description }}
<meta name="description" content="{{ .Site.Params.description }}">
{{ end }}

<!-- Keywords -->
{{ if .Params.keywords }}
<meta name="keywords" content="{{ delimit .Params.keywords "," }}">
{{ else if .Site.Params.keywords }}
<meta name="keywords" content="{{ delimit .Site.Params.keywords "," }}">
{{ end }}

<!-- Author -->
{{ if .Site.Params.author }}
<meta name="author" content="{{ .Site.Params.author }}">
{{ end }}

<!-- Open Graph -->
<meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
<meta property="og:description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:site_name" content="{{ .Site.Title }}">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
<meta name="twitter:description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">

<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="alternate icon" type="image/x-icon" href="/favicon.svg">

<!-- Tailwind CSS - 生产环境优化版本 -->
<script>
    // 仅在开发环境使用 CDN 版本
    if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
        document.write('<script src="https://cdn.tailwindcss.com"><\/script>');
        document.write('<script>tailwind.config = { darkMode: "class", theme: { extend: { fontFamily: { "sf": ["-apple-system", "BlinkMacSystemFont", "SF Pro Display", "Helvetica Neue", "Arial", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "sans-serif"] }, colors: { "apple-blue": "#007AFF", "apple-gray": "#8E8E93", "apple-light-gray": "#F2F2F7" } } } }<\/script>');
    }
</script>

<!-- 生产环境使用内联 CSS -->
<style>
    /* Tailwind CSS 核心样式 - 生产环境版本 */
    .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
    .max-w-6xl { max-width: 72rem; }
    .max-w-4xl { max-width: 56rem; }
    .max-w-2xl { max-width: 42rem; }
    .mx-auto { margin-left: auto; margin-right: auto; }
    .px-4 { padding-left: 1rem; padding-right: 1rem; }
    .py-8 { padding-top: 2rem; padding-bottom: 2rem; }
    .py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
    .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
    .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
    .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
    .p-6 { padding: 1.5rem; }
    .p-4 { padding: 1rem; }
    .mt-8 { margin-top: 2rem; }
    .mt-6 { margin-top: 1.5rem; }
    .mt-4 { margin-top: 1rem; }
    .mb-8 { margin-bottom: 2rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    .mb-4 { margin-bottom: 1rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .text-center { text-align: center; }
    .text-left { text-align: left; }
    .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
    .text-2xl { font-size: 1.5rem; line-height: 2rem; }
    .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
    .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
    .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
    .font-bold { font-weight: 700; }
    .font-semibold { font-weight: 600; }
    .font-medium { font-weight: 500; }
    .text-gray-600 { color: #4b5563; }
    .text-gray-500 { color: #6b7280; }
    .text-gray-400 { color: #9ca3af; }
    .text-blue-600 { color: #2563eb; }
    .bg-white { background-color: #ffffff; }
    .bg-gray-50 { background-color: #f9fafb; }
    .bg-gray-100 { background-color: #f3f4f6; }
    .border { border-width: 1px; }
    .border-gray-200 { border-color: #e5e7eb; }
    .rounded-lg { border-radius: 0.5rem; }
    .rounded-xl { border-radius: 0.75rem; }
    .shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
    .shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
    .flex { display: flex; }
    .grid { display: grid; }
    .hidden { display: none; }
    .block { display: block; }
    .inline-block { display: inline-block; }
    .items-center { align-items: center; }
    .justify-center { justify-content: center; }
    .justify-between { justify-content: space-between; }
    .gap-4 { gap: 1rem; }
    .gap-6 { gap: 1.5rem; }
    .w-full { width: 100%; }
    .h-full { height: 100%; }
    .min-h-screen { min-height: 100vh; }
    .transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }
    .hover\\:shadow-lg:hover { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
    .hover\\:text-blue-600:hover { color: #2563eb; }
    .cursor-pointer { cursor: pointer; }

    /* 响应式设计 */
    @media (min-width: 768px) {
        .md\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .md\\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        .md\\:px-8 { padding-left: 2rem; padding-right: 2rem; }
        .md\\:py-12 { padding-top: 3rem; padding-bottom: 3rem; }
    }

    @media (min-width: 1024px) {
        .lg\\:grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        .lg\\:grid-cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
        .lg\\:px-12 { padding-left: 3rem; padding-right: 3rem; }
    }

    /* 暗色模式 */
    .dark .text-gray-600 { color: #9ca3af; }
    .dark .text-gray-500 { color: #6b7280; }
    .dark .bg-white { background-color: #1f2937; }
    .dark .bg-gray-50 { background-color: #111827; }
    .dark .border-gray-200 { border-color: #374151; }
</style>

<!-- Custom Styles -->
<style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
        background-color: #ffffff;
        color: #1d1d1f;
        line-height: 1.47059;
        font-weight: 400;
        letter-spacing: -0.022em;
        transition: background-color 0.3s ease, color 0.3s ease;
    }

    .dark body {
        background-color: #000000;
        color: #f5f5f7;
    }

    .nav-link {
        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .nav-link:hover {
        color: #007AFF;
    }

    .dark .nav-link:hover {
        color: #409CFF;
    }

    .nav-link.active {
        color: #007AFF;
        font-weight: 600;
    }

    .dark .nav-link.active {
        color: #409CFF;
    }

    .content-card {
        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        background-color: #ffffff;
        border: 1px solid #d2d2d7;
        border-radius: 16px;
    }

    .dark .content-card {
        background-color: #1d1d1f;
        border-color: #424245;
    }

    .content-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        border-color: #007AFF;
    }

    .dark .content-card:hover {
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1);
        border-color: #409CFF;
    }

    /* 搜索高亮样式 */
    .search-highlight {
        background-color: #ffeb3b;
        color: #000;
        padding: 2px 4px;
        border-radius: 4px;
        font-weight: 600;
    }

    .dark .search-highlight {
        background-color: #ffc107;
        color: #000;
    }

    /* 滚动条样式 */
    ::-webkit-scrollbar {
        width: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    .dark ::-webkit-scrollbar-track {
        background: #2d2d2d;
    }

    ::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
    }

    .dark ::-webkit-scrollbar-thumb {
        background: #555;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
    }

    .dark ::-webkit-scrollbar-thumb:hover {
        background: #777;
    }

    /* 文本截断样式 */
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* 文章页面样式 */
    .prose {
        color: #374151;
        max-width: none;
    }

    .dark .prose {
        color: #d1d5db;
    }

    .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
        color: #111827;
        font-weight: 600;
        line-height: 1.25;
        margin-top: 2rem;
        margin-bottom: 1rem;
    }

    .dark .prose h1, .dark .prose h2, .dark .prose h3, .dark .prose h4, .dark .prose h5, .dark .prose h6 {
        color: #f9fafb;
    }

    .prose h1 {
        font-size: 2.25rem;
        margin-top: 0;
    }

    .prose h2 {
        font-size: 1.875rem;
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 0.5rem;
    }

    .dark .prose h2 {
        border-bottom-color: #374151;
    }

    .prose h3 {
        font-size: 1.5rem;
    }

    .prose h4 {
        font-size: 1.25rem;
    }

    .prose p {
        margin-top: 1.25rem;
        margin-bottom: 1.25rem;
        line-height: 1.75;
    }

    .prose ul, .prose ol {
        margin-top: 1.25rem;
        margin-bottom: 1.25rem;
        padding-left: 1.625rem;
    }

    .prose li {
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
    }

    .prose blockquote {
        font-style: italic;
        border-left: 4px solid #007AFF;
        padding-left: 1rem;
        margin: 1.5rem 0;
        color: #6b7280;
    }

    .dark .prose blockquote {
        border-left-color: #409CFF;
        color: #9ca3af;
    }

    .prose code {
        background-color: #f3f4f6;
        padding: 0.125rem 0.25rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
        color: #dc2626;
    }

    .dark .prose code {
        background-color: #374151;
        color: #fca5a5;
    }

    .prose pre {
        background-color: #1f2937;
        color: #f9fafb;
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        margin: 1.5rem 0;
    }

    .prose pre code {
        background-color: transparent;
        color: inherit;
        padding: 0;
    }

    /* 目录样式 */
    .toc-content ul {
        list-style: none;
        padding-left: 0;
    }

    .toc-content li {
        margin: 0;
    }

    .toc-content a {
        display: block;
        padding: 0.25rem 0;
        border-radius: 0.25rem;
        transition: all 0.2s ease;
    }

    .toc-content a:hover {
        background-color: #f3f4f6;
        padding-left: 0.5rem;
    }

    .dark .toc-content a:hover {
        background-color: #374151;
    }
</style>

<!-- Chart.js for interactive charts -->
{{ if or (eq .Type "topic") (.Params.charts) }}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{{ end }}
