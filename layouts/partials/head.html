<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} - {{ .Site.Title }}{{ end }}</title>

<!-- Meta Description -->
{{ if .Description }}
<meta name="description" content="{{ .Description }}">
{{ else if .Site.Params.description }}
<meta name="description" content="{{ .Site.Params.description }}">
{{ end }}

<!-- Keywords -->
{{ if .Params.keywords }}
<meta name="keywords" content="{{ delimit .Params.keywords "," }}">
{{ else if .Site.Params.keywords }}
<meta name="keywords" content="{{ delimit .Site.Params.keywords "," }}">
{{ end }}

<!-- Author -->
{{ if .Site.Params.author }}
<meta name="author" content="{{ .Site.Params.author }}">
{{ end }}

<!-- Open Graph -->
<meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
<meta property="og:description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:site_name" content="{{ .Site.Title }}">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
<meta name="twitter:description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">

<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="alternate icon" type="image/x-icon" href="/favicon.svg">

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                fontFamily: {
                    'sf': ['-apple-system', 'BlinkMacSystemFont', 'SF Pro Display', 'Helvetica Neue', 'Arial', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'sans-serif'],
                },
                colors: {
                    'apple-blue': '#007AFF',
                    'apple-gray': '#8E8E93',
                    'apple-light-gray': '#F2F2F7',
                }
            }
        }
    }
</script>

<!-- Custom Styles -->
<style>
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
        background-color: #ffffff;
        color: #1d1d1f;
        line-height: 1.47059;
        font-weight: 400;
        letter-spacing: -0.022em;
        transition: background-color 0.3s ease, color 0.3s ease;
    }

    .dark body {
        background-color: #000000;
        color: #f5f5f7;
    }

    .nav-link {
        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .nav-link:hover {
        color: #007AFF;
    }

    .dark .nav-link:hover {
        color: #409CFF;
    }

    .nav-link.active {
        color: #007AFF;
        font-weight: 600;
    }

    .dark .nav-link.active {
        color: #409CFF;
    }

    .content-card {
        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        background-color: #ffffff;
        border: 1px solid #d2d2d7;
        border-radius: 16px;
    }

    .dark .content-card {
        background-color: #1d1d1f;
        border-color: #424245;
    }

    .content-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        border-color: #007AFF;
    }

    .dark .content-card:hover {
        box-shadow: 0 4px 20px rgba(255, 255, 255, 0.1);
        border-color: #409CFF;
    }

    /* 搜索高亮样式 */
    .search-highlight {
        background-color: #ffeb3b;
        color: #000;
        padding: 2px 4px;
        border-radius: 4px;
        font-weight: 600;
    }

    .dark .search-highlight {
        background-color: #ffc107;
        color: #000;
    }

    /* 滚动条样式 */
    ::-webkit-scrollbar {
        width: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    .dark ::-webkit-scrollbar-track {
        background: #2d2d2d;
    }

    ::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
    }

    .dark ::-webkit-scrollbar-thumb {
        background: #555;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
    }

    .dark ::-webkit-scrollbar-thumb:hover {
        background: #777;
    }

    /* 文本截断样式 */
    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* 文章页面样式 */
    .prose {
        color: #374151;
        max-width: none;
    }

    .dark .prose {
        color: #d1d5db;
    }

    .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
        color: #111827;
        font-weight: 600;
        line-height: 1.25;
        margin-top: 2rem;
        margin-bottom: 1rem;
    }

    .dark .prose h1, .dark .prose h2, .dark .prose h3, .dark .prose h4, .dark .prose h5, .dark .prose h6 {
        color: #f9fafb;
    }

    .prose h1 {
        font-size: 2.25rem;
        margin-top: 0;
    }

    .prose h2 {
        font-size: 1.875rem;
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 0.5rem;
    }

    .dark .prose h2 {
        border-bottom-color: #374151;
    }

    .prose h3 {
        font-size: 1.5rem;
    }

    .prose h4 {
        font-size: 1.25rem;
    }

    .prose p {
        margin-top: 1.25rem;
        margin-bottom: 1.25rem;
        line-height: 1.75;
    }

    .prose ul, .prose ol {
        margin-top: 1.25rem;
        margin-bottom: 1.25rem;
        padding-left: 1.625rem;
    }

    .prose li {
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
    }

    .prose blockquote {
        font-style: italic;
        border-left: 4px solid #007AFF;
        padding-left: 1rem;
        margin: 1.5rem 0;
        color: #6b7280;
    }

    .dark .prose blockquote {
        border-left-color: #409CFF;
        color: #9ca3af;
    }

    .prose code {
        background-color: #f3f4f6;
        padding: 0.125rem 0.25rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
        color: #dc2626;
    }

    .dark .prose code {
        background-color: #374151;
        color: #fca5a5;
    }

    .prose pre {
        background-color: #1f2937;
        color: #f9fafb;
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        margin: 1.5rem 0;
    }

    .prose pre code {
        background-color: transparent;
        color: inherit;
        padding: 0;
    }

    /* 目录样式 */
    .toc-content ul {
        list-style: none;
        padding-left: 0;
    }

    .toc-content li {
        margin: 0;
    }

    .toc-content a {
        display: block;
        padding: 0.25rem 0;
        border-radius: 0.25rem;
        transition: all 0.2s ease;
    }

    .toc-content a:hover {
        background-color: #f3f4f6;
        padding-left: 0.5rem;
    }

    .dark .toc-content a:hover {
        background-color: #374151;
    }
</style>

<!-- Chart.js for interactive charts -->
{{ if or (eq .Type "topic") (.Params.charts) }}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{{ end }}
