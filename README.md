# NSSA - ç¥ç»ç§‘å­¦ä¸ç¤¾ä¼šåˆ†æ

[![Deploy Status](https://img.shields.io/badge/deploy-success-brightgreen)](https://nssa.io)
[![Hugo Version](https://img.shields.io/badge/hugo-v0.148.1-blue)](https://gohugo.io/)
[![Cloudflare Workers](https://img.shields.io/badge/cloudflare-workers-orange)](https://workers.cloudflare.com/)
[![License](https://img.shields.io/badge/license-MIT-green)](LICENSE)

## ğŸ“– é¡¹ç›®ç®€ä»‹

NSSAï¼ˆNeuroscience & Social Analysisï¼‰æ˜¯ä¸€ä¸ªä¸“æ³¨äºç¥ç»ç§‘å­¦ä¸ç¤¾ä¼šåˆ†æçš„ç°ä»£åŒ–å­¦æœ¯åšå®¢å¹³å°ã€‚é¡¹ç›®é‡‡ç”¨Hugoé™æ€ç½‘ç«™ç”Ÿæˆå™¨æ„å»ºï¼Œéƒ¨ç½²åœ¨Cloudflare Workersä¸Šï¼Œæä¾›é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿçš„é˜…è¯»ä½“éªŒã€‚

ç½‘ç«™æ¶µç›–èŒåœºå¿ƒç†å­¦ã€æŠ€æœ¯åˆ†æã€å†å²ç ”ç©¶ã€å¿ƒç†å­¦ç­‰å¤šä¸ªé¢†åŸŸçš„æ·±åº¦æ–‡ç« ï¼Œè‡´åŠ›äºé€šè¿‡ç§‘å­¦çš„è§†è§’åˆ†æç¤¾ä¼šç°è±¡ï¼Œä¸ºè¯»è€…æä¾›æœ‰ä»·å€¼çš„æ´å¯Ÿå’Œæ€è€ƒã€‚

**ğŸŒ åœ¨çº¿è®¿é—®**: [https://nssa.io](https://nssa.io)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ“Š ç»Ÿè®¡åŠŸèƒ½
- **çœŸå®PVç»Ÿè®¡**: åŸºäºCloudflare KVçš„é¡µé¢è®¿é—®æ¬¡æ•°ç»Ÿè®¡
- **æ™ºèƒ½ç‚¹èµç³»ç»Ÿ**: ç”¨æˆ·çº§åˆ«çš„ç‚¹èµçŠ¶æ€ç®¡ç†å’ŒæŒä¹…åŒ–å­˜å‚¨
- **é˜²åˆ·æœºåˆ¶**: 24å°æ—¶å†…åŒä¸€å®¢æˆ·ç«¯ä¸é‡å¤è®¡æ•°PVï¼Œé˜²æ­¢è™šå‡æ•°æ®

### ğŸ¨ ç”¨æˆ·ä½“éªŒ
- **Appleé£æ ¼è®¾è®¡**: ç®€æ´ä¼˜é›…çš„ç•Œé¢è®¾è®¡ï¼Œæ”¯æŒæ·±è‰²/æµ…è‰²/è·Ÿéšç³»ç»Ÿä¸‰ç§ä¸»é¢˜æ¨¡å¼
- **å“åº”å¼å¸ƒå±€**: å®Œç¾é€‚é…æ¡Œé¢ç«¯ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡
- **äº¤äº’å¼æŒ‰é’®**: ç‚¹èµã€è¯„è®ºã€åˆ†äº«ã€ä¸‹è½½ç­‰ä¸°å¯Œçš„äº¤äº’åŠŸèƒ½

### ğŸ“± åˆ†äº«åŠŸèƒ½
- **æ™ºèƒ½å¾®ä¿¡åˆ†äº«**: 
  - å¾®ä¿¡å†…ï¼šåŸç”Ÿåˆ†äº«å¼•å¯¼
  - ç§»åŠ¨ç«¯ï¼šç³»ç»Ÿåˆ†äº«APIæˆ–é“¾æ¥å¤åˆ¶
  - æ¡Œé¢ç«¯ï¼šäºŒç»´ç æ‰«ç åˆ†äº«
- **å¤šå¹³å°æ”¯æŒ**: å¾®ä¿¡ã€å¾®åšã€Facebookã€X(Twitter)ã€é‚®ä»¶åˆ†äº«
- **ä¸€é”®ä¸‹è½½**: æ–‡ç« å†…å®¹TXTæ ¼å¼ä¸‹è½½

### ğŸ”§ æŠ€æœ¯ç‰¹æ€§
- **é™æ€ç½‘ç«™ç”Ÿæˆ**: åŸºäºHugoçš„é«˜æ€§èƒ½é™æ€ç½‘ç«™
- **è¾¹ç¼˜è®¡ç®—**: Cloudflare Workersæä¾›å…¨çƒCDNåŠ é€Ÿ
- **æ•°æ®æŒä¹…åŒ–**: KVå­˜å‚¨ç¡®ä¿ç»Ÿè®¡æ•°æ®çš„å¯é æ€§
- **APIé©±åŠ¨**: RESTful APIè®¾è®¡ï¼Œæ”¯æŒå¼‚æ­¥æ•°æ®äº¤äº’

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```mermaid
graph TB
    subgraph "å‰ç«¯å±‚"
        A[Hugoé™æ€ç½‘ç«™] --> B[HTML/CSS/JS]
        B --> C[å“åº”å¼UIç»„ä»¶]
        C --> D[äº¤äº’åŠŸèƒ½æ¨¡å—]
    end
    
    subgraph "CDNå±‚"
        E[Cloudflare CDN] --> F[å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹]
        F --> G[é™æ€èµ„æºç¼“å­˜]
    end
    
    subgraph "è®¡ç®—å±‚"
        H[Cloudflare Workers] --> I[APIè·¯ç”±å¤„ç†]
        I --> J[ä¸šåŠ¡é€»è¾‘å¤„ç†]
        J --> K[æ•°æ®éªŒè¯ä¸å®‰å…¨]
    end
    
    subgraph "å­˜å‚¨å±‚"
        L[Cloudflare KV] --> M[PVç»Ÿè®¡æ•°æ®]
        L --> N[ç‚¹èµçŠ¶æ€æ•°æ®]
        L --> O[ç”¨æˆ·è¡Œä¸ºæ•°æ®]
    end
    
    subgraph "å†…å®¹ç®¡ç†"
        P[Markdownæ–‡ä»¶] --> Q[Hugoå¤„ç†]
        Q --> R[é™æ€HTMLç”Ÿæˆ]
    end
    
    A --> E
    E --> H
    H --> L
    P --> A
    
    style A fill:#e1f5fe
    style H fill:#fff3e0
    style L fill:#f3e5f5
    style P fill:#e8f5e8
```

## ğŸ”„ åº”ç”¨è°ƒç”¨æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·æµè§ˆå™¨
    participant C as Cloudflare CDN
    participant W as Workers API
    participant K as KVå­˜å‚¨
    
    Note over U,K: é¡µé¢è®¿é—®æµç¨‹
    U->>C: è¯·æ±‚é¡µé¢
    C->>U: è¿”å›é™æ€HTML
    U->>W: å¼‚æ­¥è¯·æ±‚PVæ•°æ®
    W->>K: æŸ¥è¯¢PVç»Ÿè®¡
    K->>W: è¿”å›PVæ•°æ®
    W->>U: è¿”å›JSONå“åº”
    U->>U: æ›´æ–°é¡µé¢æ˜¾ç¤º
    
    Note over U,K: PVç»Ÿè®¡æµç¨‹
    U->>W: POST /api/views/increment
    W->>K: æ£€æŸ¥å®¢æˆ·ç«¯è®¿é—®è®°å½•
    K->>W: è¿”å›è®¿é—®çŠ¶æ€
    alt 24å°æ—¶å†…æœªè®¿é—®
        W->>K: å¢åŠ PVè®¡æ•°
        W->>K: è®°å½•å®¢æˆ·ç«¯è®¿é—®
        W->>U: è¿”å›æ–°PVæ•°æ®
    else 24å°æ—¶å†…å·²è®¿é—®
        W->>U: è¿”å›å½“å‰PVæ•°æ®
    end
    
    Note over U,K: ç‚¹èµåŠŸèƒ½æµç¨‹
    U->>W: POST /api/likes/toggle
    W->>K: æŸ¥è¯¢ç”¨æˆ·ç‚¹èµçŠ¶æ€
    K->>W: è¿”å›ç‚¹èµçŠ¶æ€
    alt æœªç‚¹èµ
        W->>K: å¢åŠ ç‚¹èµæ•°
        W->>K: è®°å½•ç”¨æˆ·ç‚¹èµ
        W->>U: è¿”å›ç‚¹èµæˆåŠŸ
    else å·²ç‚¹èµ
        W->>K: å‡å°‘ç‚¹èµæ•°
        W->>K: åˆ é™¤ç”¨æˆ·ç‚¹èµè®°å½•
        W->>U: è¿”å›å–æ¶ˆç‚¹èµ
    end
```

## ğŸ“ å†…å®¹ç®¡ç†ä¸šåŠ¡æµç¨‹

### æ–°å¢æ–‡ç« æµç¨‹

```mermaid
flowchart TD
    A[å¼€å§‹] --> B[åˆ›å»ºMarkdownæ–‡ä»¶]
    B --> C[ç¼–å†™Front Matterå…ƒæ•°æ®]
    C --> D{å…ƒæ•°æ®æ ¼å¼æ­£ç¡®?}
    D -->|å¦| C
    D -->|æ˜¯| E[ç¼–å†™æ–‡ç« å†…å®¹]
    E --> F[æœ¬åœ°é¢„è§ˆæµ‹è¯•]
    F --> G{å†…å®¹æ»¡æ„?}
    G -->|å¦| E
    G -->|æ˜¯| H[æäº¤åˆ°Gitä»“åº“]
    H --> I[è§¦å‘è‡ªåŠ¨æ„å»º]
    I --> J[Hugoç”Ÿæˆé™æ€æ–‡ä»¶]
    J --> K[éƒ¨ç½²åˆ°Cloudflare Workers]
    K --> L[CDNç¼“å­˜æ›´æ–°]
    L --> M[æ–‡ç« ä¸Šçº¿]
    M --> N[ç»“æŸ]

    style A fill:#4caf50
    style N fill:#4caf50
    style D fill:#ff9800
    style G fill:#ff9800
```

### ä¿®æ”¹æ–‡ç« æµç¨‹

```mermaid
flowchart TD
    A[å¼€å§‹] --> B[å®šä½ç›®æ ‡æ–‡ç« æ–‡ä»¶]
    B --> C[ç¼–è¾‘Markdownå†…å®¹]
    C --> D[æ›´æ–°lastmodæ—¶é—´æˆ³]
    D --> E[æœ¬åœ°é¢„è§ˆä¿®æ”¹æ•ˆæœ]
    E --> F{ä¿®æ”¹æ»¡æ„?}
    F -->|å¦| C
    F -->|æ˜¯| G[æäº¤ä¿®æ”¹åˆ°Git]
    G --> H[è§¦å‘è‡ªåŠ¨æ„å»º]
    H --> I[Hugoé‡æ–°ç”Ÿæˆ]
    I --> J[å¢é‡éƒ¨ç½²æ›´æ–°]
    J --> K[CDNç¼“å­˜åˆ·æ–°]
    K --> L[ä¿®æ”¹ç”Ÿæ•ˆ]
    L --> M[ç»“æŸ]

    style A fill:#2196f3
    style M fill:#2196f3
    style F fill:#ff9800
```

### åˆ é™¤æ–‡ç« æµç¨‹

```mermaid
flowchart TD
    A[å¼€å§‹] --> B[ç¡®è®¤åˆ é™¤ç›®æ ‡]
    B --> C{æ˜¯å¦éœ€è¦å¤‡ä»½?}
    C -->|æ˜¯| D[å¤‡ä»½æ–‡ç« æ–‡ä»¶]
    C -->|å¦| E[åˆ é™¤Markdownæ–‡ä»¶]
    D --> E
    E --> F[æ£€æŸ¥ç›¸å…³é“¾æ¥]
    F --> G[æ›´æ–°å¯¼èˆªèœå•]
    G --> H[æ›´æ–°ç›¸å…³å¼•ç”¨]
    H --> I[æäº¤åˆ é™¤æ“ä½œ]
    I --> J[è§¦å‘è‡ªåŠ¨æ„å»º]
    J --> K[Hugoé‡æ–°ç”Ÿæˆ]
    K --> L[éƒ¨ç½²æ›´æ–°]
    L --> M[CDNç¼“å­˜æ¸…ç†]
    M --> N[åˆ é™¤å®Œæˆ]
    N --> O[ç»“æŸ]

    style A fill:#f44336
    style O fill:#f44336
    style C fill:#ff9800
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **Hugo**: é™æ€ç½‘ç«™ç”Ÿæˆå™¨
- **Tailwind CSS**: åŸå­åŒ–CSSæ¡†æ¶
- **JavaScript ES6+**: ç°ä»£JavaScriptç‰¹æ€§
- **å“åº”å¼è®¾è®¡**: ç§»åŠ¨ä¼˜å…ˆçš„è®¾è®¡ç†å¿µ

### åç«¯æŠ€æœ¯
- **Cloudflare Workers**: è¾¹ç¼˜è®¡ç®—å¹³å°
- **Cloudflare KV**: åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨
- **RESTful API**: æ ‡å‡†åŒ–APIè®¾è®¡
- **JSON**: æ•°æ®äº¤æ¢æ ¼å¼

### å¼€å‘å·¥å…·
- **Git**: ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
- **GitHub**: ä»£ç æ‰˜ç®¡å¹³å°
- **Wrangler CLI**: Cloudflare Workerså¼€å‘å·¥å…·
- **npm**: åŒ…ç®¡ç†å™¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
nssa/
â”œâ”€â”€ content/                 # æ–‡ç« å†…å®¹ç›®å½•
â”‚   â”œâ”€â”€ workplace/          # èŒåœºä¸“é¢˜
â”‚   â”œâ”€â”€ tech/               # æŠ€æœ¯ä¸“é¢˜
â”‚   â”œâ”€â”€ history/            # å†å²ä¸“é¢˜
â”‚   â””â”€â”€ psychology/         # å¿ƒç†ä¸“é¢˜
â”œâ”€â”€ layouts/                # Hugoæ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ _default/           # é»˜è®¤æ¨¡æ¿
â”‚   â”œâ”€â”€ partials/           # ç»„ä»¶æ¨¡æ¿
â”‚   â””â”€â”€ shortcodes/         # çŸ­ä»£ç æ¨¡æ¿
â”œâ”€â”€ static/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/                # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                 # JavaScriptæ–‡ä»¶
â”‚   â””â”€â”€ images/             # å›¾ç‰‡èµ„æº
â”œâ”€â”€ workers-site/           # Cloudflare Workersä»£ç 
â”‚   â””â”€â”€ index.js            # Workersä¸»æ–‡ä»¶
â”œâ”€â”€ config.yaml             # Hugoé…ç½®æ–‡ä»¶
â”œâ”€â”€ wrangler.toml           # Workersé…ç½®æ–‡ä»¶
â””â”€â”€ package.json            # é¡¹ç›®ä¾èµ–é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- Hugo Extended v0.148.1+
- Git
- Cloudflareè´¦æˆ·

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/Matthewyin/nssa.git
cd nssa
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
hugo server -D
```

4. **è®¿é—®æœ¬åœ°ç«™ç‚¹**
```
http://localhost:1313
```

### éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

1. **æ„å»ºé™æ€æ–‡ä»¶**
```bash
npm run build
```

2. **éƒ¨ç½²åˆ°Cloudflare Workers**
```bash
npx wrangler deploy
```

## ğŸ“Š APIæ–‡æ¡£

### PVç»Ÿè®¡API

#### è·å–æ–‡ç« PVæ•°
```http
GET /api/views/get?path={article_path}
```

#### å¢åŠ æ–‡ç« PVæ•°
```http
POST /api/views/increment
Content-Type: application/json

{
  "path": "workplace/sic",
  "clientId": "client_123"
}
```

#### æ‰¹é‡è·å–PVæ•°
```http
GET /api/views/batch?paths=path1,path2,path3
```

### ç‚¹èµåŠŸèƒ½API

#### è·å–ç‚¹èµçŠ¶æ€
```http
GET /api/likes/get?path={article_path}&clientId={client_id}
```

#### åˆ‡æ¢ç‚¹èµçŠ¶æ€
```http
POST /api/likes/toggle
Content-Type: application/json

{
  "path": "workplace/sic",
  "clientId": "client_123"
}
```

#### æ‰¹é‡è·å–ç‚¹èµæ•°æ®
```http
GET /api/likes/batch?paths=path1,path2&clientId={client_id}
```

## ğŸ”§ é…ç½®è¯´æ˜

### Hugoé…ç½® (config.yaml)
```yaml
baseURL: 'https://nssa.io'
languageCode: 'zh-cn'
title: 'NSSA - ç¥ç»ç§‘å­¦ä¸ç¤¾ä¼šåˆ†æ'
theme: 'custom'

params:
  description: 'ä¸“æ³¨äºç¥ç»ç§‘å­¦ä¸ç¤¾ä¼šåˆ†æçš„å­¦æœ¯åšå®¢'
  author: 'NSSA Team'

markup:
  goldmark:
    renderer:
      unsafe: true
```

### Workersé…ç½® (wrangler.toml)
```toml
name = "nssa"
main = "workers-site/index.js"
compatibility_date = "2023-12-01"

[site]
bucket = "./public"

[[kv_namespaces]]
binding = "ARTICLE_STATS"
id = "1d522d1cf0a547e28319cf5dc0f2d1cb"
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **é¡µé¢åŠ è½½é€Ÿåº¦**: < 1ç§’
- **é¦–æ¬¡å†…å®¹ç»˜åˆ¶**: < 0.8ç§’
- **æœ€å¤§å†…å®¹ç»˜åˆ¶**: < 1.2ç§’
- **ç´¯ç§¯å¸ƒå±€åç§»**: < 0.1
- **é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ**: < 100ms

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æˆ‘ä»¬

- **ç½‘ç«™**: [https://nssa.io](https://nssa.io)
- **GitHub**: [https://github.com/Matthewyin/nssa](https://github.com/Matthewyin/nssa)
- **é‚®ç®±**: contact@nssa.io

---

<div align="center">
  <strong>NSSA - ç”¨ç§‘å­¦çš„è§†è§’åˆ†æç¤¾ä¼šç°è±¡</strong>
</div>
